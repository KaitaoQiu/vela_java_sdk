openapi: 3.0.0
info:
  title: Generated by cue.
  version: no version
servers:
- url: /
paths: {}
components:
  schemas:
    ApplyOncePolicyRule:
      properties:
        selector:
          $ref: '#/components/schemas/ResourcePolicyRuleSelector'
        strategy:
          $ref: '#/components/schemas/ApplyOnceStrategy'
      required:
      - strategy
      title: ApplyOncePolicyRule
      type: object
    ApplyOnceStrategy:
      properties:
        affect:
          description: "When the strategy takes effect,e.g. onUpdate„ÄÅonStateKeep"
          title: affect
          type: string
        path:
          description: Specify the path of the resource that allow configuration drift
          items:
            title: path
            type: string
          title: path
          type: array
      required:
      - path
      title: strategy
      type: object
    ResourcePolicyRuleSelector:
      properties:
        componentNames:
          description: Select resources by component names
          items:
            title: componentNames
            type: string
          title: componentNames
          type: array
        componentTypes:
          description: Select resources by component types
          items:
            title: componentTypes
            type: string
          title: componentTypes
          type: array
        oamTypes:
          description: Select resources by oamTypes (COMPONENT or TRAIT)
          items:
            title: oamTypes
            type: string
          title: oamTypes
          type: array
        resourceNames:
          description: Select resources by their names
          items:
            title: resourceNames
            type: string
          title: resourceNames
          type: array
        resourceTypes:
          description: Select resources by resource types (like Deployment)
          items:
            title: resourceTypes
            type: string
          title: resourceTypes
          type: array
        traitTypes:
          description: Select resources by trait types
          items:
            title: traitTypes
            type: string
          title: traitTypes
          type: array
      title: selector
      type: object
    apply-once-spec:
      properties:
        enable:
          default: false
          description: Whether to enable apply-once for the whole application
          title: enable
          type: boolean
        rules:
          description: Specify the rules for configuring apply-once policy in resource
            level
          items:
            $ref: '#/components/schemas/ApplyOncePolicyRule'
          title: rules
          type: array
      required:
      - enable
      title: parameter
      type: object


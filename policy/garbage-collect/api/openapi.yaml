openapi: 3.0.0
info:
  title: Generated by cue.
  version: no version
servers:
- url: /
paths: {}
components:
  schemas:
    GarbageCollectPolicyRule:
      properties:
        propagation:
          description: Specify the deletion propagation strategy for target resource
            to delete
          enum:
          - orphan
          - cascading
          title: propagation
          type: string
        selector:
          $ref: '#/components/schemas/ResourcePolicyRuleSelector'
        strategy:
          default: onAppUpdate
          description: Specify the strategy for target resource to recycle
          enum:
          - onAppUpdate
          - onAppDelete
          - never
          title: strategy
          type: string
      required:
      - selector
      - strategy
      title: rules
      type: object
    ResourcePolicyRuleSelector:
      properties:
        componentNames:
          description: Select resources by component names
          items:
            title: componentNames
            type: string
          title: componentNames
          type: array
        componentTypes:
          description: Select resources by component types
          items:
            title: componentTypes
            type: string
          title: componentTypes
          type: array
        oamTypes:
          description: Select resources by oamTypes (COMPONENT or TRAIT)
          items:
            title: oamTypes
            type: string
          title: oamTypes
          type: array
        resourceNames:
          description: Select resources by their names
          items:
            title: resourceNames
            type: string
          title: resourceNames
          type: array
        resourceTypes:
          description: Select resources by resource types (like Deployment)
          items:
            title: resourceTypes
            type: string
          title: resourceTypes
          type: array
        traitTypes:
          description: Select resources by trait types
          items:
            title: traitTypes
            type: string
          title: traitTypes
          type: array
      title: selector
      type: object
    garbage-collect-spec:
      properties:
        applicationRevisionLimit:
          description: "If set, it will override the default revision limit number\
            \ and customize this number for the current application"
          title: applicationRevisionLimit
          type: integer
        continueOnFailure:
          default: false
          description: "If is set, continue to execute gc when the workflow fails,\
            \ by default gc will be executed only after the workflow succeeds"
          title: continueOnFailure
          type: boolean
        keepLegacyResource:
          default: false
          description: "If is set, outdated versioned resourcetracker will not be\
            \ recycled automatically, outdated resources will be kept until resourcetracker\
            \ be deleted manually"
          title: keepLegacyResource
          type: boolean
        rules:
          description: "Specify the list of rules to control gc strategy at resource\
            \ level, if one resource is controlled by multiple rules, first rule will\
            \ be used"
          items:
            $ref: '#/components/schemas/GarbageCollectPolicyRule'
          title: rules
          type: array
      required:
      - continueOnFailure
      - keepLegacyResource
      title: parameter
      type: object

